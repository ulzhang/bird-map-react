(this["webpackJsonpbird-map-react"]=this["webpackJsonpbird-map-react"]||[]).push([[0],{60:function(e,t,c){},61:function(e,t,c){},68:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},76:function(e,t,c){"use strict";c.r(t);var n=c(2),i=c.n(n),a=c(25),o=c.n(a),s=(c(60),c(61),c(14)),r="SET_ALL_PLACES",l="SET_SELECTED_PLACE",d="SET_PLACE_PREVIEW_VISIBILITY",u="SET_PLACE_FORM_VISIBILITY",j="SET_PRE_PLACE_LOCATION",b="ADD_NEW_PLACE",p=function(e){return{type:l,payload:e}},O=function(e){return{type:d,payload:e}},h=function(e){return{type:u,payload:e}},f="SET_SEARCH_VISIBILITY",m=function(e){return{type:f,payload:e}},v=(c(68),c(48)),_=c(5),x=Object(s.b)((function(e){return e.search}),(function(e){return{setSearchVisibility:function(t){return e(m(t))}}}))((function(e){var t=e.searchIsVisible,c=e.setSearchVisibility;return Object(_.jsxs)("div",{className:"header__container",children:[Object(_.jsx)(v.a,{style:{fontSize:"3rem",verticalAlign:"middle",position:"absolute",left:"1rem",top:"10px"},onClick:function(){return c(!t)}}),Object(_.jsx)("span",{children:"Where are the Green Parrots?"})]})})),g=c(11),I=c(77),P=c(78),S=c(79),N=c(80),w=c(83),y=c(81),E=c(82),V=Object(s.b)((function(e){return{formIsOpen:e.places.placeFormIsVisible}}),(function(e){return{toggleForm:function(t){return e(h(t))},setLocation:function(t){return e(function(e){return{type:j,payload:e}}(t))}}}))((function(e){var t=e.formIsOpen,c=e.toggleForm,i=e.setLocation,a=Object(n.useState)(null),o=Object(g.a)(a,2),s=o[0],r=o[1];return Object(I.b)({click:function(e){r(e.latlng),i(e.latlng),c(!0)}}),t&&null!==s?Object(_.jsx)(P.a,{position:s}):null})),L=c(13),T=c.n(L).a.icon({iconSize:[25,41],iconAnchor:[10,41],popupAnchor:[2,-40],iconUrl:"https://unpkg.com/leaflet@1.6/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.6/dist/images/marker-shadow.png"}),A=(c(70),Object(s.b)((function(e){var t=e.places;return{isVisible:t.placePreviewsIsVisible,places:t.places,selectedPlace:t.selectedPlace}}),(function(e){return{togglePreview:function(t){return e(O(t))},setPlaceForPreview:function(t){return e(p(t))}}}))((function(e){var t=e.isVisible,c=e.places,i=e.selectedPlace,a=e.togglePreview,o=e.setPlaceForPreview,s=[30.2672,-97.7431],r=Object(n.useState)([]),l=Object(g.a)(r,2);l[0],l[1];function d(){var e=Object(n.useState)(s),t=Object(g.a)(e,2),c=t[0],i=t[1],a=Object(I.a)();return Object(n.useEffect)((function(){a.locate().on("locationfound",(function(e){i(e.latlng),a.flyTo(e.latlng,a.getZoom())}))}),[a]),null===c?null:Object(_.jsx)(P.a,{position:c,icon:T,children:Object(_.jsxs)(S.a,{children:["You are here. ",Object(_.jsx)("br",{})]})})}var u=function(e){o(e),a(!0)};return c.map((function(e){console.log(e.position)})),Object(_.jsx)("div",{className:"map__container",children:Object(_.jsxs)(N.a,{center:s,zoom:20,scrollWheelZoom:!0,style:{height:"100vh"},zoomControl:!1,children:[Object(_.jsx)(w.a,{url:"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',maxZoom:20,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoidWx6aGFuZyIsImEiOiJja3R5eHZxMTMwMnl3MnhxZ2JyYzYzcmpzIn0.nw7l6ZxMbKNsVzy1mjMNJQ"}),c.map((function(e){return Object(_.jsx)(P.a,{position:e.position,eventHandlers:{click:function(){return function(e){t&&(a(!1),o(null)),(null===i||void 0===i?void 0:i.location)!==e.location&&setTimeout((function(){u(e)}),400)}(e)}},children:Object(_.jsx)(y.a,{children:e.location})},e.location)})),Object(_.jsx)(P.a,{position:[30.4504404703548,-97.67994568908304],children:Object(_.jsx)(y.a,{children:"TEST ONLOAD MARKER PLACE"})},"TEST ONLOAD MARKER PLACE"),Object(_.jsx)(V,{}),Object(_.jsx)(E.a,{position:"topleft",zoomInText:"+",zoomOutText:"-"}),Object(_.jsx)(d,{})]})})}))),k=c(49),C=(c(71),Object(s.b)((function(e){var t=e.search,c=e.places;return{searchIsVisible:t.searchIsVisible,places:c.places}}),(function(e){return{closeSearch:function(){return e(m(!1))},setSelectedPlace:function(t){e(p(t)),e(O(!0))}}}))((function(e){var t=e.searchIsVisible,c=e.places,n=e.closeSearch,i=e.setSelectedPlace;return Object(_.jsxs)("div",{className:"search__container search__container--".concat(t&&"active"),children:[Object(_.jsxs)("div",{className:"search__header",children:[Object(_.jsx)("span",{className:"search__header__close",role:"button",onClick:function(){return n()},children:Object(_.jsx)(k.a,{})}),Object(_.jsx)("span",{className:"search__header__title",children:"Search"})]}),Object(_.jsx)("div",{className:"search__list",children:c.map((function(e){return Object(_.jsxs)("div",{className:"search__list__item",style:{background:"#00B140"},onClick:function(){return i(e)},children:[e.location,e.date]},e.location)}))})]})}))),F=c(35),D=(c(72),Object(s.b)((function(e){var t=e.places;return{isVisible:t.placePreviewsIsVisible,place:t.selectedPlace}}),(function(e){return{closePreview:function(){return e(O(!1))}}}))((function(e){var t=e.isVisible,c=e.place,n=e.closePreview;return Object(_.jsxs)("div",{className:"preview__container preview__container--".concat(t&&c&&"active"),children:[Object(_.jsx)("div",{className:"preview__close",onClick:function(){return n()},children:Object(_.jsx)(F.a,{})}),Object(_.jsxs)("div",{className:"preview__description__container",children:[Object(_.jsx)("h1",{children:"Location"}),Object(_.jsx)("div",{className:"preview__location",children:null===c||void 0===c?void 0:c.location}),Object(_.jsx)("h1",{children:"Date"}),Object(_.jsx)("div",{className:"preview__date",children:null===c||void 0===c?void 0:c.date}),Object(_.jsx)("h1",{children:"Description"}),Object(_.jsx)("div",{className:"preview__description",children:null===c||void 0===c?void 0:c.description}),Object(_.jsx)("h1",{children:"Position"}),Object(_.jsx)("div",{className:"preview__latlng",children:null===c||void 0===c?void 0:c.position})]})]})}))),z=c(7),R=(c(73),c(34)),M=c(52),B=c(19);Object(M.a)({apiKey:"AIzaSyDafTBcwBZ9g7nnzvQYW1m644ZV_sRTvJQ",authDomain:"bird-maps-1.firebaseapp.com",databaseURL:"https://bird-maps-1-default-rtdb.firebaseio.com",projectId:"bird-maps-1",storageBucket:"bird-maps-1.appspot.com",messagingSenderId:"460361909334",appId:"1:460361909334:web:9e8db450c35df6e9bda7f7",measurementId:"G-K6PPGQL6T2"});var G=Object(s.b)((function(e){var t=e.places;return{isVisible:t.placeFormIsVisible,position:t.prePlacePosition}}),(function(e){return{closeForm:function(){return e(h(!1))},addNewPlace:function(t){e({type:b,payload:t})}}}))((function(e){var t=e.isVisible,c=e.position,n=e.closeForm,i=e.addNewPlace;return Object(_.jsxs)("div",{className:"form__container form__container--".concat(t&&"active"),children:[Object(_.jsxs)("div",{className:"form__header",children:[Object(_.jsx)("span",{className:"form__header__close",role:"button",onClick:function(){return n()},children:Object(_.jsx)(F.a,{})}),Object(_.jsx)("span",{className:"form__header__title",children:"Add new Place"})]}),Object(_.jsx)(R.c,{initialValues:{location:"",description:""},validate:function(e){return Object.keys(e).reduce((function(t,c){return e[c]?t:Object(z.a)({},t)}),{})},onSubmit:function(e){var t=Date.now();i(Object(z.a)(Object(z.a)({},e),{},{position:[c.lat,c.lng],date:new Date(t).toString()})),function(e,t,c,n){var i=Object(B.c)();t=t||"test",Object(B.e)(Object(B.d)(i,"sighting/"+n.toString()+"/"),{date:new Date(n).toString(),LatLng:e,location:t,description:c}),console.log("when: "+n.toString()+" where: "+e)}(c,e.location,e.description,t),n()},children:function(e){var t=e.errors;e.touched,e.isValidating;return Object(_.jsxs)(R.b,{children:[Object(_.jsxs)("div",{className:"formGroup",children:[Object(_.jsxs)("div",{className:"formGroupInput",children:[Object(_.jsx)("label",{htmlFor:"location",children:"Location"}),Object(_.jsx)(R.a,{id:"location",name:"location",placeholder:"Neighborhood?"})]}),t.location&&Object(_.jsx)("div",{className:"errors",children:"Required"})]}),Object(_.jsxs)("div",{className:"formGroup",children:[Object(_.jsxs)("div",{className:"formGroupInput",children:[Object(_.jsx)("label",{htmlFor:"description",children:"Description"}),Object(_.jsx)(R.a,{id:"description",name:"description",placeholder:"General observation notes..."})]}),t.description&&Object(_.jsx)("div",{className:"errors",children:"Required"})]}),Object(_.jsx)("div",{className:"button__container",children:Object(_.jsx)("button",{className:"form__button",type:"submit",children:"Submit"})})]})}})]})}));var Z=function(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("nav",{children:Object(_.jsx)(x,{})}),Object(_.jsxs)("main",{children:[Object(_.jsx)(C,{}),Object(_.jsx)(A,{}),Object(_.jsx)(D,{}),Object(_.jsx)(G,{})]})]})},J=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,84)).then((function(t){var c=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;c(e),n(e),i(e),a(e),o(e)}))},Y=c(40),W=c(41),K=Object(B.d)(Object(B.c)()),U=[];Object(B.b)(Object(B.a)(K,"sighting")).then((function(e){e.exists()?e.forEach((function(e){U.push({date:e.val().date,position:e.val().LatLng,location:e.val().location,description:e.val().description})})):console.log("No data available")})).catch((function(e){console.error(e)}));var Q,X,H={places:U,selectedPlace:null,placePreviewsIsVisible:!1,placeFormIsVisible:!1,prePlacePosition:null},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r:return Object(z.a)(Object(z.a)({},e),{},{places:t.payload});case l:return Object(z.a)(Object(z.a)({},e),{},{selectedPlace:t.payload});case d:return Object(z.a)(Object(z.a)({},e),{},{placePreviewsIsVisible:t.payload});case u:return Object(z.a)(Object(z.a)({},e),{},{placeFormIsVisible:t.payload});case j:return Object(z.a)(Object(z.a)({},e),{},{prePlacePosition:t.payload});case b:return Object(z.a)(Object(z.a)({},e),{},{places:[].concat(Object(W.a)(e.places),[t.payload])});default:return e}},$={searchIsVisible:!1},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;return t.type===f?Object(z.a)(Object(z.a)({},e),{},{searchIsVisible:t.payload}):e},te=Object(Y.a)({places:q,search:ee}),ce=Object(Y.b)(te,(null===(Q=window)||void 0===Q?void 0:Q.__REDUX_DEVTOOLS_EXTENSION__)&&(null===(X=window)||void 0===X?void 0:X.__REDUX_DEVTOOLS_EXTENSION__()));o.a.render(Object(_.jsx)(i.a.StrictMode,{children:Object(_.jsx)(s.a,{store:ce,children:Object(_.jsx)(Z,{})})}),document.getElementById("root")),J()}},[[76,1,2]]]);
//# sourceMappingURL=main.01dce065.chunk.js.map