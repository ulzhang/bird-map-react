(this["webpackJsonpbird-map-react"]=this["webpackJsonpbird-map-react"]||[]).push([[0],{60:function(e,t,n){},61:function(e,t,n){},68:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n.n(c),a=n(26),o=n.n(a),r=(n(60),n(61),n(14)),s="SET_ALL_PLACES",l="SET_SELECTED_PLACE",d="SET_PLACE_PREVIEW_VISIBILITY",u="SET_PLACE_FORM_VISIBILITY",b="SET_PRE_PLACE_LOCATION",p="ADD_NEW_PLACE",j=function(e){return{type:l,payload:e}},h=function(e){return{type:d,payload:e}},O=function(e){return{type:u,payload:e}},m="SET_SEARCH_VISIBILITY",f=function(e){return{type:m,payload:e}},v=(n(68),n(49)),_=n(5),x=Object(r.b)((function(e){return e.search}),(function(e){return{setSearchVisibility:function(t){return e(f(t))}}}))((function(e){var t=e.searchIsVisible,n=e.setSearchVisibility;return Object(_.jsxs)("div",{className:"header__container",children:[Object(_.jsx)(v.a,{style:{fontSize:"3rem",verticalAlign:"middle",position:"absolute",left:"1rem",top:"10px"},onClick:function(){return n(!t)}}),Object(_.jsx)("span",{children:"Where are the Green Parrots?"})]})})),g=n(11),I=n(77),P=n(78),y=n(79),S=n(80),w=n(83),N=n(81),E=n(82),L=Object(r.b)((function(e){return{formIsOpen:e.places.placeFormIsVisible}}),(function(e){return{toggleForm:function(t){return e(O(t))},setLocation:function(t){return e(function(e){return{type:b,payload:e}}(t))}}}))((function(e){var t=e.formIsOpen,n=e.toggleForm,i=e.setLocation,a=Object(c.useState)(null),o=Object(g.a)(a,2),r=o[0],s=o[1];return Object(I.b)({click:function(e){s(e.latlng),i(e.latlng),n(!0)}}),t&&null!==r?Object(_.jsx)(P.a,{position:r}):null})),V=n(13),T=n.n(V).a.icon({iconSize:[25,41],iconAnchor:[10,41],popupAnchor:[2,-40],iconUrl:"https://unpkg.com/leaflet@1.6/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.6/dist/images/marker-shadow.png"}),k=n(18),A=n.n(k),C=n(30),F=n(20),z=n(37),D=(Object(z.a)({apiKey:"AIzaSyDafTBcwBZ9g7nnzvQYW1m644ZV_sRTvJQ",authDomain:"bird-maps-1.firebaseapp.com",databaseURL:"https://bird-maps-1-default-rtdb.firebaseio.com",projectId:"bird-maps-1",storageBucket:"bird-maps-1.appspot.com",messagingSenderId:"460361909334",appId:"1:460361909334:web:9e8db450c35df6e9bda7f7",measurementId:"G-K6PPGQL6T2"}),Object(F.d)(Object(F.c)()));function M(){return(M=Object(C.a)(A.a.mark((function e(){var t,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,Object(F.b)(Object(F.a)(D,"sighting")).then((function(e){e.exists()?e.forEach((function(e){var n=[e.val().LatLng.lat,e.val().LatLng.lng],c={date:e.val().date,position:n,location:e.val().location,description:e.val().description};console.log(c),t.push(c)})):console.log("No data available")})).catch((function(e){console.error(e)}));case 3:return n=[{date:"0",description:"Mueller Lake Park",location:"Mueller Lake Park",position:[30.296837121677424,-97.70583834525243]},{date:"0",description:"Zilker Park",location:"Zilker Park",position:[30.266467999637396,-97.76770124360763]},{date:"0",description:"Texas State Cemetery",location:"Texas State Cemetery",position:[30.26612885415308,-97.72629372733968]},{date:"0",description:"Austin Animal Center",location:"Austin Animal Center",position:[30.25236767828445,-97.68987941448056]},{date:"0",description:"IM Fields",location:"IM Fields",position:[30.315221598446712,-97.72947554456864]}].concat(t),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(72);var R=Object(r.b)((function(e){console.log("mapstatetoprops");var t=e.places;return{isVisible:t.placePreviewsIsVisible,places:t.places,selectedPlace:t.selectedPlace}}),(function(e){return{togglePreview:function(t){return e(h(t))},setPlaceForPreview:function(t){return e(j(t))},setAllPlacesAgain:function(t){return e({type:s,payload:t})}}}))((function(e){var t=e.isVisible,n=e.setAllPlacesAgain,i=e.places,a=e.selectedPlace,o=e.togglePreview,r=e.setPlaceForPreview,s=[30.2672,-97.7431],l=Object(c.useState)([]),d=Object(g.a)(l,2);d[0],d[1];function u(){var e=Object(c.useState)(s),t=Object(g.a)(e,2),n=t[0],i=t[1],a=Object(I.a)();return Object(c.useEffect)((function(){a.locate().on("locationfound",(function(e){i(e.latlng),a.flyTo(e.latlng,a.getZoom())}))}),[a]),null===n?null:Object(_.jsx)(P.a,{position:n,icon:T,children:Object(_.jsxs)(y.a,{children:["You are here. ",Object(_.jsx)("br",{})]})})}Object(c.useEffect)((function(){(function(){return M.apply(this,arguments)})().then((function(e){return n(e)}))}),[]),console.log(i);var b=function(e){r(e),o(!0)};return console.log("Map initialized"),i.map((function(e){return console.log(e)})),Object(_.jsx)("div",{className:"map__container",children:Object(_.jsxs)(S.a,{center:s,zoom:18,scrollWheelZoom:!0,style:{height:"100vh"},zoomControl:!1,children:[Object(_.jsx)(w.a,{url:"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoidWx6aGFuZyIsImEiOiJja3R5eHZxMTMwMnl3MnhxZ2JyYzYzcmpzIn0.nw7l6ZxMbKNsVzy1mjMNJQ"}),i.map((function(e){return Object(_.jsx)(P.a,{position:e.position,eventHandlers:{click:function(){return function(e){t&&(o(!1),r(null)),(null===a||void 0===a?void 0:a.location)!==e.location&&setTimeout((function(){b(e)}),400)}(e)}},children:Object(_.jsx)(N.a,{children:e.location})},e.location)})),Object(_.jsx)(L,{}),Object(_.jsx)(E.a,{position:"topleft",zoomInText:"+",zoomOutText:"-"}),Object(_.jsx)(u,{})]})})})),Z=n(51),B=(n(73),Object(r.b)((function(e){var t=e.search,n=e.places;return{searchIsVisible:t.searchIsVisible,places:n.places}}),(function(e){return{closeSearch:function(){return e(f(!1))},setSelectedPlace:function(t){e(j(t)),e(h(!0))}}}))((function(e){var t=e.searchIsVisible,n=e.places,c=e.closeSearch,i=e.setSelectedPlace;return Object(_.jsxs)("div",{className:"search__container search__container--".concat(t&&"active"),children:[Object(_.jsxs)("div",{className:"search__header",children:[Object(_.jsx)("span",{className:"search__header__close",role:"button",onClick:function(){return c()},children:Object(_.jsx)(Z.a,{})}),Object(_.jsx)("span",{className:"search__header__title",children:"Search"})]}),Object(_.jsx)("div",{className:"search__list",children:n.map((function(e){return Object(_.jsx)("div",{className:"search__list__item",style:{background:"#00B140"},onClick:function(){return i(e)},children:e.location},e.location)}))})]})}))),G=n(38),J=(n(74),Object(r.b)((function(e){var t=e.places;return{isVisible:t.placePreviewsIsVisible,place:t.selectedPlace}}),(function(e){return{closePreview:function(){return e(h(!1))}}}))((function(e){var t=e.isVisible,n=e.place,c=e.closePreview;return Object(_.jsxs)("div",{className:"preview__container preview__container--".concat(t&&n&&"active"),children:[Object(_.jsx)("div",{className:"preview__close",onClick:function(){return c()},children:Object(_.jsx)(G.a,{})}),Object(_.jsxs)("div",{className:"preview__description__container",children:[Object(_.jsx)("h1",{children:"Location"}),Object(_.jsx)("div",{className:"preview__location",children:null===n||void 0===n?void 0:n.location}),Object(_.jsx)("h1",{children:"Date"}),Object(_.jsx)("div",{className:"preview__date",children:null===n||void 0===n?void 0:n.date}),Object(_.jsx)("h1",{children:"Description"}),Object(_.jsx)("div",{className:"preview__description",children:null===n||void 0===n?void 0:n.description}),Object(_.jsx)("h1",{children:"Position"}),Object(_.jsx)("div",{className:"preview__latlng",children:null===n||void 0===n?void 0:n.position})]})]})}))),Y=n(7),Q=(n(75),n(35));Object(z.a)({apiKey:"AIzaSyDafTBcwBZ9g7nnzvQYW1m644ZV_sRTvJQ",authDomain:"bird-maps-1.firebaseapp.com",databaseURL:"https://bird-maps-1-default-rtdb.firebaseio.com",projectId:"bird-maps-1",storageBucket:"bird-maps-1.appspot.com",messagingSenderId:"460361909334",appId:"1:460361909334:web:9e8db450c35df6e9bda7f7",measurementId:"G-K6PPGQL6T2"});var W=Object(r.b)((function(e){var t=e.places;return{isVisible:t.placeFormIsVisible,position:t.prePlacePosition}}),(function(e){return{closeForm:function(){return e(O(!1))},addNewPlace:function(t){e({type:p,payload:t})}}}))((function(e){var t=e.isVisible,n=e.position,c=e.closeForm,i=e.addNewPlace;return Object(_.jsxs)("div",{className:"form__container form__container--".concat(t&&"active"),children:[Object(_.jsxs)("div",{className:"form__header",children:[Object(_.jsx)("span",{className:"form__header__close",role:"button",onClick:function(){return c()},children:Object(_.jsx)(G.a,{})}),Object(_.jsx)("span",{className:"form__header__title",children:"Add new Place"})]}),Object(_.jsx)(Q.c,{initialValues:{location:"",description:""},validate:function(e){return Object.keys(e).reduce((function(t,n){return e[n]?t:Object(Y.a)({},t)}),{})},onSubmit:function(e){var t=Date.now();i(Object(Y.a)(Object(Y.a)({},e),{},{position:[n.lat,n.lng],date:new Date(t).toString()})),function(e,t,n,c){var i=Object(F.c)();t=t||"test",Object(F.e)(Object(F.d)(i,"sighting/"+c.toString()+"/"),{date:new Date(c).toString(),LatLng:e,location:t,description:n}),console.log("when: "+c.toString()+" where: "+e)}(n,e.location,e.description,t),c()},children:function(e){var t=e.errors;e.touched,e.isValidating;return Object(_.jsxs)(Q.b,{children:[Object(_.jsxs)("div",{className:"formGroup",children:[Object(_.jsxs)("div",{className:"formGroupInput",children:[Object(_.jsx)("label",{htmlFor:"location",children:"Location"}),Object(_.jsx)(Q.a,{id:"location",name:"location",placeholder:"Neighborhood?"})]}),t.location&&Object(_.jsx)("div",{className:"errors",children:"Required"})]}),Object(_.jsxs)("div",{className:"formGroup",children:[Object(_.jsxs)("div",{className:"formGroupInput",children:[Object(_.jsx)("label",{htmlFor:"description",children:"Description"}),Object(_.jsx)(Q.a,{id:"description",name:"description",placeholder:"General observation notes..."})]}),t.description&&Object(_.jsx)("div",{className:"errors",children:"Required"})]}),Object(_.jsx)("div",{className:"button__container",children:Object(_.jsx)("button",{className:"form__button",type:"submit",children:"Submit"})})]})}})]})}));var U,K,X=function(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("nav",{children:Object(_.jsx)(x,{})}),Object(_.jsxs)("main",{children:[Object(_.jsx)(B,{}),Object(_.jsx)(R,{}),Object(_.jsx)(J,{}),Object(_.jsx)(W,{})]})]})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,84)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),i(e),a(e),o(e)}))},q=n(41),$=n(42),ee={places:[],selectedPlace:null,placePreviewsIsVisible:!1,placeFormIsVisible:!1,prePlacePosition:null},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return Object(Y.a)(Object(Y.a)({},e),{},{places:t.payload});case l:return Object(Y.a)(Object(Y.a)({},e),{},{selectedPlace:t.payload});case d:return Object(Y.a)(Object(Y.a)({},e),{},{placePreviewsIsVisible:t.payload});case u:return Object(Y.a)(Object(Y.a)({},e),{},{placeFormIsVisible:t.payload});case b:return Object(Y.a)(Object(Y.a)({},e),{},{prePlacePosition:t.payload});case p:return Object(Y.a)(Object(Y.a)({},e),{},{places:[].concat(Object($.a)(e.places),[t.payload])});default:return e}},ne={searchIsVisible:!1},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;return t.type===m?Object(Y.a)(Object(Y.a)({},e),{},{searchIsVisible:t.payload}):e},ie=Object(q.a)({places:te,search:ce}),ae=Object(q.b)(ie,(null===(U=window)||void 0===U?void 0:U.__REDUX_DEVTOOLS_EXTENSION__)&&(null===(K=window)||void 0===K?void 0:K.__REDUX_DEVTOOLS_EXTENSION__()));o.a.render(Object(_.jsx)(i.a.StrictMode,{children:Object(_.jsx)(r.a,{store:ae,children:Object(_.jsx)(X,{})})}),document.getElementById("root")),H()}},[[76,1,2]]]);
//# sourceMappingURL=main.b54bedc1.chunk.js.map